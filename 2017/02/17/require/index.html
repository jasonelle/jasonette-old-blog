<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      require JSON; &middot; jasonette
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://jasonelle.com/jasonette-old-blog/public/css/poole.css">
  <link rel="stylesheet" href="http://jasonelle.com/jasonette-old-blog/public/css/syntax.css">
  <link rel="stylesheet" href="http://jasonelle.com/jasonette-old-blog/public/css/hyde.css?1491595318605540000">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400italic,700,700italic" rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://jekyll.gtat.me/assets/css/entypo.css" media="all">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

	<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>require JSON; - jasonette</title>
<meta property="og:title" content="require JSON;" />
<meta name="description" content="The $network.request action is used to dynamically fetch a single remote JSON file. But what if you want to fetch as many JSON files as you want, simultaneously?" />
<meta property="og:description" content="The $network.request action is used to dynamically fetch a single remote JSON file. But what if you want to fetch as many JSON files as you want, simultaneously?" />
<link rel="canonical" href="http://jasonelle.com/jasonette-old-blog/2017/02/17/require/" />
<meta property="og:url" content="http://jasonelle.com/jasonette-old-blog/2017/02/17/require/" />
<meta property="og:site_name" content="jasonette" />
<meta property="og:image" content="http://jasonelle.com/jasonette-old-blog/assets/octopus.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-17T00:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@jasonclient" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "require JSON;",
"image": "http://jasonelle.com/jasonette-old-blog/assets/octopus.jpg",
"datePublished": "2017-02-17T00:00:00-05:00",
"description": "The $network.request action is used to dynamically fetch a single remote JSON file. But what if you want to fetch as many JSON files as you want, simultaneously?",
"url": "http://jasonelle.com/jasonette-old-blog/2017/02/17/require/"}</script>
<!-- End Jekyll SEO tag -->


  <body class="layout-reverse">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          <img class='logo' src='http://jasonelle.com/jasonette-old-blog/assets/jasonette.png'>
          <br>
          jasonette
        </a>
      </h1>
      <p class="lead">⚡️ Native App over HTTP</p>
    </div>

    <nav class="sidebar-nav">
      <!--
      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
      
        
          
        
      
        
          
        
      
      -->
      <a class="sidebar-nav-item inline nopadding" href="http://jasonelle.com/">About</a>
      <a class="sidebar-nav-item inline nopadding" href="http://jasonelle.com/blog">Blog</a>
      <a class="sidebar-nav-item inline nopadding" href="https://docs.jasonette.com">Docs</a>
      <div class='sidebar-nav-item bold'>Subscribe to Newsletter</div>
			<div class='sidebar-nav-item nopadding'>
				<form action="//textethan.us8.list-manage.com/subscribe/post?u=54e23b3fe61843c19c384fc05&amp;id=76d5746d7b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="novalidate">
					<p>Important updates, milestones, new projects, and useful tips from the community.</p>
					<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="enter email" aria-required="true">
					<button type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">Subscribe</button>
					<div id="mce-responses" class="clear">
							<div class="response" id="mce-error-response" style="display:none"></div>
							<div class="response" id="mce-success-response" style="display:none"></div>
					</div>
					<div style="position: absolute; left: -5000px;" aria-hidden="true">
							<input type="text" name="b_54e23b3fe61843c19c384fc05_76d5746d7b" tabindex="-1" value="">
					</div>
				</form>
			</div>
      <div class='sidebar-nav-item bold'>Community</div>
      <a class="sidebar-nav-item inline" href="https://jasonette.now.sh/">Slack</a>
			<a class="sidebar-nav-item inline" href="https://jasonelle.com/">Forum</a>
			<a class="sidebar-nav-item inline" href="https://jasonelle.com/">Twitter</a>
      <div class='sidebar-nav-item bold'>Github</div>
			<a class="sidebar-nav-item icon" href="https://github.com/jasonelle/JASONETTE-Android">Android <img src='http://jasonelle.com/jasonette-old-blog/assets/android.png'></a>
			<a class="sidebar-nav-item icon" href="https://github.com/jasonelle/JASONETTE-Android">iOS <img src='http://jasonelle.com/jasonette-old-blog/assets/apple.png'></a>
      <!--
      <div class='sidebar-nav-item bold'>RSS</div>
			<a class="sidebar-nav-item icon" href='/atom.xml'><img src='http://jasonelle.com/jasonette-old-blog/assets/feed.png'></a>
      -->
    </nav>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">require JSON;</h1>
  <span class="post-date">17 Feb 2017</span>
  <p>The <a href="http://docs.jasonette.com/actions/#networkrequest">$network.request</a> action is used to dynamically fetch a <strong>single</strong> remote JSON file. But what if you want to fetch <strong>as many JSON files as you want, simultaneously?</strong></p>

<p>Welcome to the world of <a href="http://docs.jasonette.com/actions/#require">$require</a>.</p>

<p><br></p>

<p><img src="/assets/octopus.jpg" alt="parallel"></p>

<p><br></p>

<h1>Why would I want to do that?</h1>

<p>Maybe you need to compose <strong>multiple sets of data</strong> to display to the view.</p>

<p>Maybe you need to fetch JSON objects from multiple different servers, <strong>each for a different purpose</strong>.</p>

<p>Or just maybe, you&#39;re building a completely <strong>decentralized networking app</strong> which needs to hit up every node individually!</p>

<p>Just remember that <strong>EVERYTHING on Jasonette (models, actions, views, templates, styles, or whatever) is expressed in JSON</strong>, which means you can dynamically <strong>require</strong> any part of your app.</p>

<hr>

<p>In any case, this requires a powerful <strong>parallel networking</strong> feature.</p>

<p><br></p>

<h1>Problem</h1>

<p>Let&#39;s say we wanted to fetch a remote JSON object and assign it to a local variable:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/posts"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ol>
<li>We use <a href="http://docs.jasonette.com/actions/#networkrequest">$network.request</a> to fetch some posts as JSON.</li>
<li>Then we assign the result to a local variable <code>posts</code>, using the <a href="http://docs.jasonette.com/actions/#set">$set</a> action.</li>
</ol>

<p><br></p>

<p><strong>Now, what if we wanted to fetch from 6 different resources and do the same thing? Here&#39;s the code:</strong></p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/posts"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/comments"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/albums"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"albums"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/photos"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"photos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/todos"</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="nt">"todos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$network.request"</span><span class="p">,</span><span class="w">
                      </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/users"</span><span class="w">
                      </span><span class="p">},</span><span class="w">
                      </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                          </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason}}"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                      </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>There are two problems:</p>

<ol>
<li>The code is too long</li>
<li>It will be 6 times slow because it runs these network requests one after one, serially.</li>
</ol>

<p><br></p>

<h1>Meet $require.</h1>

<p>Now comes <a href="http://docs.jasonette.com/actions/#require">$require</a> to the rescue:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$require"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/posts"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/comments"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"albums"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/albums"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"photos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/photos"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"todos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/todos"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/users"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.posts}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.comments}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"albums"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.albums}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"photos"</span><span class="p">:</span><span class="w">  </span><span class="s2">"{{$jason.photos}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"todos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.todos}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.users}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>No kidding, this is it! This code does exactly the same thing as above!</p>

<p>Furthermore it&#39;s 6 times faster since the requests are made concurrently.</p>

<p>Basically, <code>$require</code> waits until all of the requests have returned (either success or failure), and then calls its <code>success</code> callback with the returned JSON objects.</p>

<p>To reiterate:</p>

<ol>
<li>The code is much shorter</li>
<li>Will be 6 times faster since the network requests are run in parallel</li>
</ol>

<p><br></p>

<h1>Syntax</h1>

<p>Let&#39;s get into the actual syntax.</p>

<p>Just like any other actions, the <code>$require</code> action takes an <code>options</code> object. There are two patterns:</p>

<ol>
<li>Key: URL String</li>
<li>Key: URL Array</li>
</ol>

<p><br></p>

<h2>1. Key: URL String</h2>

<p>The same syntax we saw above. Basically, the <code>$require</code> action looks at all <code>key: value</code> pairs in the <code>options</code> object, fetches all the URL strings, and then assigns each result to its corresponding key of the return value.</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$require"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/posts"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/comments"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"jasonplaceholder_posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.posts}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"jasonplaceholder_comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.comments}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In this example, the keys are <code>posts</code> and <code>comments</code>, so you can access the results in the succeeding action (<code>$set</code>) using <code>{{$jason.posts}}</code> and <code>{{$jason.comments}}</code>.</p>

<p><br></p>

<h2>2. Key: URL Array</h2>

<p>You can also have an array of URLs (instead of a single URL string) as the value.</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="p">{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$require"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://jsonplaceholder.typicode.com/posts"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/comments"</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$set"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"jasonplaceholder_posts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.result[0]}}"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"jasonplaceholder_comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{$jason.result[1]}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In this example, we only have a single key (<code>result</code>) and the value is an array of URLs. So when we fetch these remote JSON content, we push them into the <code>result</code> array. Once all JSON responses have returned, we go on to the next action <code>$set</code>, where we can access them using <code>{{$jason.result[0]}}</code> and <code>{{$jason.result[1]}}</code>.</p>

<p><br></p>

<h1>Performance</h1>

<p>The biggest concern I had when first working on this feature was performance. For some reason I had this idea that on mobile, only a single network request should be made at a time.</p>

<p>Turns out, <strong>this was absolutely a non-issue!</strong> Upon actually trying it out on my iPhone and Android, I found that there is <strong>no noticeable difference</strong>!</p>

<p>I thought about why this is so, and in retrospect it kind of makes sense. Here&#39;s the reasoning:</p>

<p>Think about a typical app where the view displays multiple items, each with an image and some text. When you load this view, it&#39;s going out there and concurrently fetching EVERY image and displaying it on the screen. Which means, this type of concurrent requests have existed on a low level, and have already been working fine without me realizing. And in most cases JSON files are significantly smaller than images. If concurrent image downloads work fine, concurrent JSON downloads should have no problem!</p>

<p><br></p>

<h1>Note</h1>

<p><code>$require</code> has one job--fetch multiple JSON files in parallel--and it doesn&#39;t try to be more than that. </p>

<h2>1. Only GET request</h2>

<p>Since <code>$require</code> is more about requiring multiple JSON files and not about actually making requests that will update things on the server, every <code>$require</code> is actually a <code>GET</code> request under the hood. </p>

<h2>2. Only JSON type</h2>

<p><a href="http://docs.jasonette.com/actions/#require">$require</a> is strictly for fetching JSON. </p>

<p>If you want to fetch HTML, RSS, or any raw content, these are not meant to be done in parallel and you need to use <a href="http://docs.jasonette.com/actions/#networkrequest">$network.request</a>.</p>

<p><br></p>

<h1>Conclusion</h1>

<p>Parallel network requests can be extremely powerful, especially considering how literally <strong>EVERYTHING on Jasonette is expressed in JSON.</strong></p>

<p>This includes all of model, view, controller logic.</p>

<p>All you need to do is:</p>

<ol>
<li><strong>Require some JSON object</strong></li>
<li><strong>Assign them to a local variable</strong></li>
<li><strong>Use it anywhere!</strong></li>
</ol>

<p>What&#39;s possible is only bound by your imagination.</p>

<p>I&#39;ve been personally experimenting with $require and can see there&#39;s all kinds of potentially interesting use cases. If you find a clever use case, <a href="https://jasonelle.com/">please share</a>!</p>

<hr>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2017/04/07/JSON-web-container/">
            JSON web container
            <small>07 Apr 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/03/02/self-mixin/">
            Self Mix-in
            <small>02 Mar 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/02/27/mixins/">
            Mix~in!
            <small>27 Feb 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

  </body>
</html>
